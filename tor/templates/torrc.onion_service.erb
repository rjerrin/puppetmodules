<% if @single_hop != false -%>
HiddenServiceSingleHopMode 1
HiddenServiceNonAnonymousMode 1
SOCKSPort 0

<% end -%>
# hidden service <%= @name %>
HiddenServiceDir <%= @data_dir_path %>
<% Array(@ports).each do |port| -%>
HiddenServicePort <%= port =~ /^\d+$/ ? "#{port} 127.0.0.1:#{port}" : port %>
<% end -%>

<% if @v3 != false -%>
# hidden service v3 static
HiddenServiceDir <%= @data_dir_path %>3
HiddenServiceVersion 3
<% Array(@ports).each do |port| -%>
HiddenServicePort <%= port %>
<% end
end -%>
